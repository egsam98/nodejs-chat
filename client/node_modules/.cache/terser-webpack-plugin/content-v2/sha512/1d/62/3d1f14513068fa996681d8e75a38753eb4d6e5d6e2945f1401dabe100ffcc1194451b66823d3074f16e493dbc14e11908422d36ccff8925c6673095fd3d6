{"map":"{\"version\":3,\"sources\":[\"/home/egor/WebstormProjects/NodejsChat/client/src/About.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/Chat/Messages.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/Chat/ChatInput.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/Chat/Login.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/Chat/UserOnline.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/Chat/Chat.js\",\"/home/egor/WebstormProjects/NodejsChat/client/src/index.js\"],\"names\":[\"About\",\"react_default\",\"a\",\"createElement\",\"React\",\"Component\",\"Messages\",\"wrapMessagesInHtml\",\"message\",\"i\",\"messageStyle\",\"fontSize\",\"padding\",\"wordWrap\",\"type\",\"Object\",\"assign\",\"color\",\"fontStyle\",\"display\",\"justifyContent\",\"style\",\"key\",\"text\",\"src\",\"data\",\"avatar\",\"alt\",\"nickname\",\"_this2\",\"this\",\"messages\",\"props\",\"map\",\"height\",\"overflow\",\"overflowX\",\"overflowY\",\"margin\",\"ChatInput\",\"_this\",\"classCallCheck\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"handleChange\",\"event\",\"setState\",\"textareaVal\",\"target\",\"value\",\"handleKeyPressed\",\"handleClick\",\"preventDefault\",\"state\",\"sendToServer\",\"currentSocket\",\"className\",\"onKeyPress\",\"onChange\",\"disabled\",\"disconnected\",\"onClick\",\"Login\",\"updateInputVal\",\"inputVal\",\"connectToRoom\",\"isOpen\",\"refs\",\"input\",\"focus\",\"reactstrap_es\",\"id\",\"centered\",\"ref\",\"UserOnline\",\"toggleMenu\",\"cookies\",\"Cookies\",\"parseInt\",\"get\",\"user\",\"handleOutsideClick\",\"divRef\",\"current\",\"parentElement\",\"handleMouseEnter\",\"backgroundColor\",\"handleMouseLeave\",\"setMenuRefs\",\"elem\",\"menuRefs\",\"push\",\"createRef\",\"subDivBackground\",\"document\",\"addEventListener\",\"_iteratorNormalCompletion\",\"_didIteratorError\",\"_iteratorError\",\"undefined\",\"_step\",\"_iterator\",\"Symbol\",\"iterator\",\"next\",\"done\",\"menuRef\",\"err\",\"return\",\"subDivStyle\",\"cursor\",\"divStyle\",\"position\",\"border\",\"minWidth\",\"boxShadow\",\"zIndex\",\"Link\",\"textDecoration\",\"to\",\"connectToPrivate\",\"reverseString\",\"s\",\"split\",\"reverse\",\"join\",\"Chat\",\"socket\",\"openSocket\",\"concat\",\"on\",\"set\",\"console\",\"log\",\"sessionId\",\"usersOnline\",\"roomMessages\",\"currentNav\",\"sockets\",\"updateNav\",\"navName\",\"_ROOM_NAV_NAME\",\"messagesStore\",\"_ROOM_MESSAGE_STORE\",\"partner\",\"isReverse\",\"arguments\",\"length\",\"conversationId\",\"privateMessages\",\"disconnect\",\"emit\",\"nav\",\"disablePrivates\",\"newNav\",\"forEach\",\"item\",\"indexOf\",\"handleClickNav\",\"active\",\"handleCloseNav\",\"divId\",\"filter\",\"lastItem\",\"navStyle\",\"marginLeft\",\"marginRight\",\"paddingLeft\",\"paddingRight\",\"href\",\"Chat_UserOnline\",\"roomName\",\"data-toggle\",\"data-target\",\"aria-controls\",\"aria-expanded\",\"aria-label\",\"Chat_Login\",\"fontWeight\",\"Chat_Messages\",\"Chat_ChatInput\",\"ReactDOM\",\"render\",\"BrowserRouter\",\"Switch\",\"Route\",\"path\",\"component\",\"Redirect\",\"getElementById\"],\"mappings\":\"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\",\"sourcesContent\":[\"import React from 'react';\\n\\nclass About extends React.Component{\\n    render(){\\n        return (\\n            <div>\\n                <h2>О сайте</h2>\\n            </div>\\n        )\\n    }\\n}\\n\\nexport default About;\\n\",\"import React from 'react';\\nimport '../css/styles.css';\\n\\nclass Messages extends React.Component {\\n\\n    wrapMessagesInHtml = (message, i) => {\\n        const info = {\\n            color: '#828282',\\n            fontStyle: 'italic',\\n            display: 'flex',\\n            justifyContent: 'center',\\n            padding: '0px'\\n        };\\n        const messageStyle = {\\n            fontSize: '24px',\\n            padding: '5px',\\n            wordWrap: 'break-word'\\n        };\\n\\n        if (message.type === 'info'){\\n            Object.assign(messageStyle, info);\\n            return <div style={messageStyle} key={i}>\\n                {message.text}\\n            </div>\\n        }\\n        else return <div style={messageStyle} key={i}>\\n            <img src={message.data.avatar} alt={'Error'} /> {message.data.nickname}: {message.text}\\n        </div>\\n    };\\n\\n    render() {\\n\\n        const messagesDiv = {\\n            height: '80vh',\\n            overflow: 'scroll',\\n            overflowX: 'hidden',\\n            overflowY: 'auto',\\n            margin: '5px'\\n        };\\n\\n        const messages = this.props.messages.map((message, i) => this.wrapMessagesInHtml(message, i));\\n        return <div style={messagesDiv}>{messages}</div>;\\n    }\\n}\\n\\nexport default Messages;\",\"import React from 'react';\\n\\nclass ChatInput extends React.Component {\\n\\n    constructor(props) {\\n        super(props);\\n        this.state = {\\n            textareaVal: ''\\n        };\\n    }\\n\\n    handleChange = (event) => {\\n        this.setState({textareaVal: event.target.value})\\n    };\\n\\n    handleKeyPressed = (event) => {\\n        if (event.key !== 'Enter') return false;\\n        this.handleClick();\\n        event.preventDefault();\\n    };\\n\\n    handleClick = () => {\\n        if (this.state.textareaVal === '')\\n            return;\\n        this.props.sendToServer(this.state.textareaVal);\\n        this.setState({textareaVal: ''});\\n    };\\n\\n    render() {\\n        let currentSocket = this.props.currentSocket;\\n        return (\\n            <div className=\\\"d-flex justify-content-center\\\">\\n                <textarea className=\\\"col-md-6 pt-2\\\" onKeyPress={this.handleKeyPressed} onChange={this.handleChange}\\n                          value={this.state.textareaVal} disabled={currentSocket? currentSocket.disconnected: false}/>\\n                <button className=\\\"col-md-1\\\" onClick={this.handleClick}>Отправить</button>\\n            </div>\\n        );\\n    }\\n}\\n\\nexport default ChatInput;\",\"import React from 'react';\\nimport {Modal, ModalBody, ModalHeader, ModalFooter, Button} from 'reactstrap';\\nimport '../css/styles.css';\\n\\nclass Login extends React.Component {\\n\\n    constructor(props){\\n        super(props);\\n        this.inputVal = '';\\n        this.state = {\\n            isOpen: true\\n        };\\n    }\\n\\n    componentDidMount() {\\n        this.refs.input.focus();\\n    }\\n\\n    updateInputVal = (event) => {\\n        this.inputVal = event.target.value;\\n    };\\n\\n    handleClick = () => {\\n        this.props.connectToRoom(this.inputVal);\\n        this.setState({isOpen: false});\\n    };\\n\\n    handleKeyPressed = (event) => {\\n        if (event.key !== 'Enter') return false;\\n        this.handleClick();\\n    };\\n\\n    render() {\\n        return (\\n            <Modal id=\\\"login\\\" isOpen={this.state.isOpen} centered={true}>\\n                <ModalHeader>Введите свой никнейм</ModalHeader>\\n                <ModalBody className='flex-centered'>\\n                    <input className='match-parent' onChange={this.updateInputVal}\\n                           onKeyPress={this.handleKeyPressed} ref=\\\"input\\\" />\\n                </ModalBody>\\n                <ModalFooter>\\n                    <Button onClick={this.handleClick}>ОК</Button>\\n                </ModalFooter>\\n            </Modal>\\n        );\\n    }\\n}\\n\\nexport default Login;\",\"import React from 'react';\\nimport {BrowserRouter as Router, Route, Switch, Link} from 'react-router-dom';\\nimport Cookies from 'universal-cookie';\\n\\nclass UserOnline extends React.Component{\\n\\n    constructor(props) {\\n        super(props);\\n        this.divRef = React.createRef();\\n        this.menuRefs = [];\\n        this.state = {\\n            toggleMenu: false,\\n            subDivBackground: 'white',\\n        };\\n    }\\n\\n    componentDidMount() {\\n        document.addEventListener('click', this.handleOutsideClick);\\n        for(let menuRef of this.menuRefs) {\\n            menuRef.addEventListener('mouseenter', this.handleMouseEnter);\\n            menuRef.addEventListener('mouseleave', this.handleMouseLeave);\\n        }\\n    }\\n\\n    toggleMenu = () => {\\n        const cookies = new Cookies();\\n        if (parseInt(cookies.get('id')) !== this.props.user.id)\\n            this.setState({toggleMenu: !this.state.toggleMenu});\\n    };\\n\\n    handleOutsideClick = (event) => {\\n        if ((this.divRef.current !== event.target.parentElement)\\n        && (this.divRef.current !== event.target)){\\n            this.setState({toggleMenu: false});\\n        }\\n    };\\n\\n    handleMouseEnter = (event) => {\\n        event.target.style.backgroundColor = 'blue';\\n    };\\n\\n    handleMouseLeave = (event) => {\\n        event.target.style.backgroundColor = 'white';\\n    };\\n\\n    setMenuRefs = (elem) => {\\n        return this.menuRefs.push(elem)\\n    };\\n\\n    render() {\\n        const subDivStyle = {\\n            cursor: 'pointer',\\n            backgroundColor: this.state.subDivBackground,\\n            display: 'flex',\\n            justifyContent: 'center'\\n        };\\n        const divStyle = {\\n            position: 'absolute',\\n            display: this.state.toggleMenu ? 'block': 'none',\\n            border: 'black 1px solid',\\n            minWidth: '160px',\\n            boxShadow: '0px 8px 16px 0px rgba(0,0,0,0.2)',\\n            backgroundColor: 'white',\\n            zIndex: 1\\n        };\\n        return (\\n            <div ref={this.divRef} onClick={this.toggleMenu}>\\n                <img src={this.props.user.avatar} style={{cursor: 'pointer'}} />{this.props.user.nickname}\\n                <div style={divStyle}>\\n                    <Link style={{ textDecoration: 'none' }} to={`#`}\\n                    onClick={() => this.props.connectToPrivate(this.props.user)}>\\n                        <div ref={this.setMenuRefs} style={subDivStyle}>\\n                            Написать в ЛС\\n                        </div>\\n                    </Link>\\n                </div>\\n            </div>\\n        )\\n    }\\n}\\n\\nexport default UserOnline;\",\"import React from 'react';\\nimport Messages from \\\"./Messages\\\";\\nimport ChatInput from \\\"./ChatInput\\\";\\nimport Login from './Login';\\nimport UserOnline from \\\"./UserOnline\\\";\\nimport {Link} from \\\"react-router-dom\\\";\\nimport openSocket from 'socket.io-client';\\nimport Cookies from 'universal-cookie';\\n\\nfunction reverseString(s){\\n    return s.split(\\\"\\\").reverse().join(\\\"\\\");\\n}\\n\\n\\n\\nclass Chat extends React.Component{\\n\\n    constructor(props) {\\n        super(props);\\n        this.cookies = new Cookies();\\n        this._ROOM_NAV_NAME = 'ROOM';\\n        this._ROOM_MESSAGE_STORE = 'ROOM';\\n        this.roomMessages = [];\\n        this.privateMessages = {};\\n        this.state = {\\n            sockets: [],\\n            currentSocket: null,\\n            nav: [],\\n            usersOnline: [],\\n            messages: [],\\n            currentNav: ''\\n        };\\n    }\\n\\n    connectToRoom = (nickname) => {\\n        const socket = openSocket(`http://127.0.0.1:5000?nickname=${nickname}`);\\n        socket.on('cookiesReceived', message => {\\n            this.cookies.set('id', message.data.id);\\n            this.cookies.set('nickname', message.data.nickname);\\n            this.cookies.set('avatar', message.data.avatar);\\n        });\\n        socket.on('userConnected', (message) => {\\n            console.log('Websocket: broadcast from \\\\'connected\\\\' channel:', message);\\n            if (!this.state.sessionId)\\n                this.setState({sessionId: this.cookies.get('id')});\\n            this.setState({usersOnline: message.data.usersOnline});\\n            this.roomMessages.push(message);\\n            // if (window.location.pathname === '/')\\n            if (this.state.currentNav === '')\\n                this.setState({\\n                    messages: this.roomMessages,\\n                    sockets: this.state.sockets.concat(socket),\\n                    currentSocket: socket,\\n                });\\n            this.updateNav({\\n                navName: this._ROOM_NAV_NAME,\\n                messagesStore: this._ROOM_MESSAGE_STORE,\\n                socket,\\n            });\\n        });\\n        socket.on('message', (message) => {\\n            console.log('Websocket: broadcast from \\\\'room\\\\' namespace \\\\'message\\\\' channel:', message);\\n            this.roomMessages.push(message);\\n            // if (window.location.pathname === '/')\\n            if (this.state.currentNav === '')\\n                this.setState({\\n                    messages: this.roomMessages,\\n                });\\n        });\\n        socket.on('join', (message) => {\\n            console.log('Websocket: broadcast from \\\\'join\\\\' channel:', message);\\n            // this.updateUsersOnline(message.data.usersOnline);\\n            let partner = {\\n                id: message.data.id,\\n                nickname: message.data.navName\\n            };\\n            this.connectToPrivate(partner, true)\\n        });\\n        socket.on('userDisconnected', (message) => {\\n            console.log('Websocket: broadcast from \\\\'userDisconnected\\\\' channel:', message);\\n            this.setState({usersOnline: message.data.usersOnline});\\n            this.roomMessages.push(message);\\n            // if (window.location.pathname === '/')\\n            if (this.state.currentNav === '')\\n                this.setState({\\n                    messages: this.roomMessages,\\n                });\\n            // this.disablePrivates();\\n        });\\n    };\\n    connectToPrivate = (partner, isReverse=false) => {\\n        console.log('PARTNER', partner);\\n        let conversationId = (this.cookies.get('id') + '-' + partner.id);\\n        if (isReverse)\\n            conversationId = reverseString(conversationId);\\n        const socket = openSocket(`http://127.0.0.1:5000?conversationId=${conversationId}&id=${this.cookies.get('id')}\\n        &nickname=${this.cookies.get('nickname')}&avatar=${this.cookies.get('avatar')}`);\\n        console.log('PRIVATE', this.privateMessages);\\n        if (this.privateMessages[reverseString(conversationId)]) {\\n            // this.privateMessages[conversationId] = [];\\n            conversationId = reverseString(conversationId);\\n        }\\n        socket.on('established', (message) => {\\n            console.log('Websocket: broadcast \\\\'established\\\\' channel:', message);\\n            this.updateNav({\\n                navName: partner.nickname,\\n                messagesStore: conversationId,\\n                socket,\\n            });\\n            if (!this.privateMessages[conversationId])\\n                this.privateMessages[conversationId] = [];\\n            this.privateMessages[conversationId].push(message);\\n            // if (window.location.pathname === `/${conversationId}`)\\n            if (this.state.currentNav === conversationId)\\n                this.setState({\\n                    messages: this.privateMessages[conversationId],\\n                    currentSocket: socket\\n                });\\n            // let reversedConversationId = reverseString(conversationId);\\n            // if (this.privateMessages[reversedConversationId]) {\\n            //     conversationId = reversedConversationId;\\n            //     this.privateMessages[conversationId].push(message)\\n            // }\\n            // else {\\n            //     if (!this.privateMessages[conversationId])\\n            //         this.privateMessages[conversationId] = [];\\n            //     this.privateMessages[conversationId].push(message);\\n            // }\\n            // // if (window.location.pathname === `/${conversationId}`)\\n            // if (this.state.currentNav === conversationId)\\n            //     this.setState({\\n            //         messages: this.privateMessages[conversationId],\\n            //         currentSocket: socket\\n            //     });\\n        });\\n        socket.on('privateMessage', (message) => {\\n            console.log('Websocket: broadcast from \\\\'privateMessage\\\\' channel:', message);\\n            if (!this.privateMessages[conversationId])\\n                this.privateMessages[conversationId] = [];\\n            this.privateMessages[conversationId].push(message);\\n            // if (window.location.pathname === `/${conversationId}`)\\n            if (this.state.currentNav === conversationId)\\n                this.setState({\\n                    messages: this.privateMessages[conversationId],\\n                });\\n            this.updateNav({\\n                navName: partner.nickname,\\n                messagesStore: conversationId,\\n                socket,\\n            });\\n        });\\n        socket.on('demolished', (message) => {\\n            console.log('Websocket: broadcast from \\\\'demolished\\\\' channel:', message);\\n            this.state.currentSocket.disconnect();\\n            this.privateMessages[conversationId].push(message);\\n            // if (window.location.pathname === `/${conversationId}`)\\n            if (this.state.currentNav === conversationId)\\n                this.setState({\\n                    messages: this.privateMessages[conversationId],\\n                });\\n            // this.privateMessages[conversationId] = [];\\n            // this.state.currentSocket.disconnect()\\n        });\\n    };\\n    sendToServer = (text) => {\\n        let message = {\\n            data: {\\n                nickname: this.cookies.get('nickname'),\\n                avatar: this.cookies.get('avatar')\\n            },\\n            text\\n        };\\n        this.state.currentSocket.emit('message', message);\\n    };\\n    updateNav = (nav) => {\\n        console.log('UPDATE NAV', nav, this.state.nav);\\n        for (let navSaved of this.state.nav) {\\n            if (navSaved.messagesStore === nav.messagesStore)\\n                return;\\n        }\\n        // nav.active = false;\\n        this.setState({nav: this.state.nav.concat(nav)})\\n    };\\n    disablePrivates = () => {\\n        let newNav = this.state.nav;\\n        let id = this.cookies.get('id');\\n        newNav.forEach(item => {\\n            if (item.messagesStore.indexOf(id) !== -1) {\\n                this.privateMessages[id] = this.privateMessages[item.messagesStore];\\n                item.messagesStore = id;\\n            }\\n        });\\n        this.setState({nav: newNav})\\n    };\\n\\n    handleClickNav = (item) => {\\n        if (item.messagesStore === this._ROOM_MESSAGE_STORE)\\n            this.setState({\\n                messages: this.roomMessages\\n            });\\n        else this.setState({\\n            messages: this.privateMessages[item.messagesStore]\\n        });\\n        this.setState({currentSocket: item.socket});\\n        let newNav = this.state.nav.map(elem => {\\n            elem.active = item.messagesStore === elem.messagesStore;\\n            return elem;\\n        });\\n        this.setState({\\n            nav: newNav,\\n            currentNav: item.navName === this._ROOM_NAV_NAME? '': item.messagesStore\\n        });\\n    };\\n\\n    handleCloseNav = (divId) => {\\n        // this.state.currentSocket.disconnect();\\n        // console.log('CUR_SOCKET', this.state.currentSocket);\\n        let newNav = this.state.nav.filter(item => {\\n            console.log(item.messagesStore, divId);\\n            return item.messagesStore !== divId\\n        });\\n        let lastItem = newNav[newNav.length-1];\\n        console.log('LAST_ITEm', lastItem);\\n        this.handleClickNav(lastItem)\\n        this.setState({nav: newNav});\\n\\n    };\\n\\n    render() {\\n        console.log('NAVS', this.state.nav);\\n        const nav = this.state.nav.map((item, i) => {\\n            const navStyle = {\\n                display: 'flex',\\n                justifyContent: 'center',\\n                marginLeft: '5px',\\n                marginRight: '5px',\\n                paddingLeft: '5px',\\n                paddingRight: '5px',\\n                border: item.active? 'black 1px solid': ''\\n            };\\n            return (\\n                <div id={item.messagesStore} style={navStyle} key={i}>\\n                    <button className=\\\"nav-item nav-link\\\"\\n                          onClick={() => this.handleClickNav(item)}>{item.navName}</button>\\n                    <a href={'#'} style={{textDecoration: 'none', color:'black'}}\\n                       onClick={() => this.handleCloseNav(item.messagesStore)}>&times;</a>\\n                </div>\\n            )\\n        });\\n        const usersOnline = this.state.usersOnline.map((user, i) => {\\n            user.nickname += user.id === parseInt(this.cookies.get('id')) && user.nickname.indexOf('(Вы)') === -1? ' (Вы)': '';\\n\\n            return <UserOnline key={i} user={user} sessionId={this.state.sessionId} roomName={this._ROOM_NAV_NAME}\\n                               connectToPrivate={this.connectToPrivate} />\\n        });\\n        return(\\n            <div>\\n                <nav className=\\\"navbar navbar-expand-lg navbar-light bg-light\\\">\\n                    <a className=\\\"navbar-brand\\\" href=\\\"#\\\">\\n                        <h3>Chat</h3>\\n                    </a>\\n                    <button className=\\\"navbar-toggler\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#navbarNavAltMarkup\\\"\\n                            aria-controls=\\\"navbarNavAltMarkup\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\">\\n                        <span className=\\\"navbar-toggler-icon\\\" />\\n                    </button>\\n                    <div className=\\\"collapse navbar-collapse\\\" id=\\\"navbarNavAltMarkup\\\">\\n                        <div className=\\\"navbar-nav\\\">\\n                            {nav}\\n                        </div>\\n                    </div>\\n                </nav>\\n                <Login connectToRoom={this.connectToRoom}/>\\n                <div className='usersOnlineStyle'>\\n                    <p style={{fontWeight: 'bold'}}>Пользователи в комнате \\\"{this._ROOM_NAV_NAME}\\\": </p>\\n                    {usersOnline}\\n                </div>\\n                <Messages messages={this.state.messages}/>\\n                <ChatInput currentSocket={this.state.currentSocket} sendToServer={this.sendToServer} />\\n            </div>\\n        );\\n    }\\n}\\n\\nexport default Chat;\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport About from './About';\\nimport Chat from './Chat/Chat';\\nimport {BrowserRouter as Router, Route, Switch, Redirect} from 'react-router-dom';\\n\\nReactDOM.render(\\n        <Router>\\n            <Switch>\\n                <Route path=\\\"/\\\" component={Chat}/>\\n                <Route path=\\\"/about\\\" component={About}/>\\n                <Redirect to={'/'} />\\n            </Switch>\\n        </Router>\\n    , document.getElementById('root'));\\n\\n\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){},50:function(e,t,a){e.exports=a(85)},81:function(e,t){},85:function(e,t,a){\"use strict\";a.r(t);var n=a(1),s=a.n(n),r=a(13),o=a.n(r),c=a(7),i=a(8),l=a(10),u=a(9),d=a(11),v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){return s.a.createElement(\"div\",null,s.a.createElement(\"h2\",null,\"\\u041e \\u0441\\u0430\\u0439\\u0442\\u0435\"))}}]),t}(s.a.Component),m=(a(36),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).wrapMessagesInHtml=function(e,t){var a={fontSize:\"24px\",padding:\"5px\",wordWrap:\"break-word\"};return\"info\"===e.type?(Object.assign(a,{color:\"#828282\",fontStyle:\"italic\",display:\"flex\",justifyContent:\"center\",padding:\"0px\"}),s.a.createElement(\"div\",{style:a,key:t},e.text)):s.a.createElement(\"div\",{style:a,key:t},s.a.createElement(\"img\",{src:e.data.avatar,alt:\"Error\"}),\" \",e.data.nickname,\": \",e.text)},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){var e=this,t=this.props.messages.map(function(t,a){return e.wrapMessagesInHtml(t,a)});return s.a.createElement(\"div\",{style:{height:\"80vh\",overflow:\"scroll\",overflowX:\"hidden\",overflowY:\"auto\",margin:\"5px\"}},t)}}]),t}(s.a.Component)),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({textareaVal:e.target.value})},a.handleKeyPressed=function(e){if(\"Enter\"!==e.key)return!1;a.handleClick(),e.preventDefault()},a.handleClick=function(){\"\"!==a.state.textareaVal&&(a.props.sendToServer(a.state.textareaVal),a.setState({textareaVal:\"\"}))},a.state={textareaVal:\"\"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){var e=this.props.currentSocket;return s.a.createElement(\"div\",{className:\"d-flex justify-content-center\"},s.a.createElement(\"textarea\",{className:\"col-md-6 pt-2\",onKeyPress:this.handleKeyPressed,onChange:this.handleChange,value:this.state.textareaVal,disabled:!!e&&e.disconnected}),s.a.createElement(\"button\",{className:\"col-md-1\",onClick:this.handleClick},\"\\u041e\\u0442\\u043f\\u0440\\u0430\\u0432\\u0438\\u0442\\u044c\"))}}]),t}(s.a.Component),p=a(17),h=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateInputVal=function(e){a.inputVal=e.target.value},a.handleClick=function(){a.props.connectToRoom(a.inputVal),a.setState({isOpen:!1})},a.handleKeyPressed=function(e){if(\"Enter\"!==e.key)return!1;a.handleClick()},a.inputVal=\"\",a.state={isOpen:!0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"componentDidMount\",value:function(){this.refs.input.focus()}},{key:\"render\",value:function(){return s.a.createElement(p.b,{id:\"login\",isOpen:this.state.isOpen,centered:!0},s.a.createElement(p.e,null,\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043e\\u0439 \\u043d\\u0438\\u043a\\u043d\\u0435\\u0439\\u043c\"),s.a.createElement(p.c,{className:\"flex-centered\"},s.a.createElement(\"input\",{className:\"match-parent\",onChange:this.updateInputVal,onKeyPress:this.handleKeyPressed,ref:\"input\"})),s.a.createElement(p.d,null,s.a.createElement(p.a,{onClick:this.handleClick},\"\\u041e\\u041a\")))}}]),t}(s.a.Component),f=a(86),k=a(24),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).toggleMenu=function(){var e=new k.a;parseInt(e.get(\"id\"))!==a.props.user.id&&a.setState({toggleMenu:!a.state.toggleMenu})},a.handleOutsideClick=function(e){a.divRef.current!==e.target.parentElement&&a.divRef.current!==e.target&&a.setState({toggleMenu:!1})},a.handleMouseEnter=function(e){e.target.style.backgroundColor=\"blue\"},a.handleMouseLeave=function(e){e.target.style.backgroundColor=\"white\"},a.setMenuRefs=function(e){return a.menuRefs.push(e)},a.divRef=s.a.createRef(),a.menuRefs=[],a.state={toggleMenu:!1,subDivBackground:\"white\"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"componentDidMount\",value:function(){document.addEventListener(\"click\",this.handleOutsideClick);var e=!0,t=!1,a=void 0;try{for(var n,s=this.menuRefs[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var r=n.value;r.addEventListener(\"mouseenter\",this.handleMouseEnter),r.addEventListener(\"mouseleave\",this.handleMouseLeave)}}catch(o){t=!0,a=o}finally{try{e||null==s.return||s.return()}finally{if(t)throw a}}}},{key:\"render\",value:function(){var e=this,t={cursor:\"pointer\",backgroundColor:this.state.subDivBackground,display:\"flex\",justifyContent:\"center\"},a={position:\"absolute\",display:this.state.toggleMenu?\"block\":\"none\",border:\"black 1px solid\",minWidth:\"160px\",boxShadow:\"0px 8px 16px 0px rgba(0,0,0,0.2)\",backgroundColor:\"white\",zIndex:1};return s.a.createElement(\"div\",{ref:this.divRef,onClick:this.toggleMenu},s.a.createElement(\"img\",{src:this.props.user.avatar,style:{cursor:\"pointer\"}}),this.props.user.nickname,s.a.createElement(\"div\",{style:a},s.a.createElement(f.a,{style:{textDecoration:\"none\"},to:\"#\",onClick:function(){return e.props.connectToPrivate(e.props.user)}},s.a.createElement(\"div\",{ref:this.setMenuRefs,style:t},\"\\u041d\\u0430\\u043f\\u0438\\u0441\\u0430\\u0442\\u044c \\u0432 \\u041b\\u0421\"))))}}]),t}(s.a.Component),E=a(34),O=a.n(E);function S(e){return e.split(\"\").reverse().join(\"\")}var M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).connectToRoom=function(e){var t=O()(\"http://127.0.0.1:5000?nickname=\".concat(e));t.on(\"cookiesReceived\",function(e){a.cookies.set(\"id\",e.data.id),a.cookies.set(\"nickname\",e.data.nickname),a.cookies.set(\"avatar\",e.data.avatar)}),t.on(\"userConnected\",function(e){console.log(\"Websocket: broadcast from 'connected' channel:\",e),a.state.sessionId||a.setState({sessionId:a.cookies.get(\"id\")}),a.setState({usersOnline:e.data.usersOnline}),a.roomMessages.push(e),\"\"===a.state.currentNav&&a.setState({messages:a.roomMessages,sockets:a.state.sockets.concat(t),currentSocket:t}),a.updateNav({navName:a._ROOM_NAV_NAME,messagesStore:a._ROOM_MESSAGE_STORE,socket:t})}),t.on(\"message\",function(e){console.log(\"Websocket: broadcast from 'room' namespace 'message' channel:\",e),a.roomMessages.push(e),\"\"===a.state.currentNav&&a.setState({messages:a.roomMessages})}),t.on(\"join\",function(e){console.log(\"Websocket: broadcast from 'join' channel:\",e);var t={id:e.data.id,nickname:e.data.navName};a.connectToPrivate(t,!0)}),t.on(\"userDisconnected\",function(e){console.log(\"Websocket: broadcast from 'userDisconnected' channel:\",e),a.setState({usersOnline:e.data.usersOnline}),a.roomMessages.push(e),\"\"===a.state.currentNav&&a.setState({messages:a.roomMessages})})},a.connectToPrivate=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(\"PARTNER\",e);var n=a.cookies.get(\"id\")+\"-\"+e.id;t&&(n=S(n));var s=O()(\"http://127.0.0.1:5000?conversationId=\".concat(n,\"&id=\").concat(a.cookies.get(\"id\"),\"\\n        &nickname=\").concat(a.cookies.get(\"nickname\"),\"&avatar=\").concat(a.cookies.get(\"avatar\")));console.log(\"PRIVATE\",a.privateMessages),a.privateMessages[S(n)]&&(n=S(n)),s.on(\"established\",function(t){console.log(\"Websocket: broadcast 'established' channel:\",t),a.updateNav({navName:e.nickname,messagesStore:n,socket:s}),a.privateMessages[n]||(a.privateMessages[n]=[]),a.privateMessages[n].push(t),a.state.currentNav===n&&a.setState({messages:a.privateMessages[n],currentSocket:s})}),s.on(\"privateMessage\",function(t){console.log(\"Websocket: broadcast from 'privateMessage' channel:\",t),a.privateMessages[n]||(a.privateMessages[n]=[]),a.privateMessages[n].push(t),a.state.currentNav===n&&a.setState({messages:a.privateMessages[n]}),a.updateNav({navName:e.nickname,messagesStore:n,socket:s})}),s.on(\"demolished\",function(e){console.log(\"Websocket: broadcast from 'demolished' channel:\",e),a.state.currentSocket.disconnect(),a.privateMessages[n].push(e),a.state.currentNav===n&&a.setState({messages:a.privateMessages[n]})})},a.sendToServer=function(e){var t={data:{nickname:a.cookies.get(\"nickname\"),avatar:a.cookies.get(\"avatar\")},text:e};a.state.currentSocket.emit(\"message\",t)},a.updateNav=function(e){console.log(\"UPDATE NAV\",e,a.state.nav);var t=!0,n=!1,s=void 0;try{for(var r,o=a.state.nav[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){if(r.value.messagesStore===e.messagesStore)return}}catch(c){n=!0,s=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw s}}a.setState({nav:a.state.nav.concat(e)})},a.disablePrivates=function(){var e=a.state.nav,t=a.cookies.get(\"id\");e.forEach(function(e){-1!==e.messagesStore.indexOf(t)&&(a.privateMessages[t]=a.privateMessages[e.messagesStore],e.messagesStore=t)}),a.setState({nav:e})},a.handleClickNav=function(e){e.messagesStore===a._ROOM_MESSAGE_STORE?a.setState({messages:a.roomMessages}):a.setState({messages:a.privateMessages[e.messagesStore]}),a.setState({currentSocket:e.socket});var t=a.state.nav.map(function(t){return t.active=e.messagesStore===t.messagesStore,t});a.setState({nav:t,currentNav:e.navName===a._ROOM_NAV_NAME?\"\":e.messagesStore})},a.handleCloseNav=function(e){var t=a.state.nav.filter(function(t){return console.log(t.messagesStore,e),t.messagesStore!==e}),n=t[t.length-1];console.log(\"LAST_ITEm\",n),a.handleClickNav(n),a.setState({nav:t})},a.cookies=new k.a,a._ROOM_NAV_NAME=\"ROOM\",a._ROOM_MESSAGE_STORE=\"ROOM\",a.roomMessages=[],a.privateMessages={},a.state={sockets:[],currentSocket:null,nav:[],usersOnline:[],messages:[],currentNav:\"\"},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){var e=this;console.log(\"NAVS\",this.state.nav);var t=this.state.nav.map(function(t,a){var n={display:\"flex\",justifyContent:\"center\",marginLeft:\"5px\",marginRight:\"5px\",paddingLeft:\"5px\",paddingRight:\"5px\",border:t.active?\"black 1px solid\":\"\"};return s.a.createElement(\"div\",{id:t.messagesStore,style:n,key:a},s.a.createElement(\"button\",{className:\"nav-item nav-link\",onClick:function(){return e.handleClickNav(t)}},t.navName),s.a.createElement(\"a\",{href:\"#\",style:{textDecoration:\"none\",color:\"black\"},onClick:function(){return e.handleCloseNav(t.messagesStore)}},\"\\xd7\"))}),a=this.state.usersOnline.map(function(t,a){return t.nickname+=t.id===parseInt(e.cookies.get(\"id\"))&&-1===t.nickname.indexOf(\"(\\u0412\\u044b)\")?\" (\\u0412\\u044b)\":\"\",s.a.createElement(b,{key:a,user:t,sessionId:e.state.sessionId,roomName:e._ROOM_NAV_NAME,connectToPrivate:e.connectToPrivate})});return s.a.createElement(\"div\",null,s.a.createElement(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-light\"},s.a.createElement(\"a\",{className:\"navbar-brand\",href:\"#\"},s.a.createElement(\"h3\",null,\"Chat\")),s.a.createElement(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarNavAltMarkup\",\"aria-controls\":\"navbarNavAltMarkup\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\"},s.a.createElement(\"span\",{className:\"navbar-toggler-icon\"})),s.a.createElement(\"div\",{className:\"collapse navbar-collapse\",id:\"navbarNavAltMarkup\"},s.a.createElement(\"div\",{className:\"navbar-nav\"},t))),s.a.createElement(h,{connectToRoom:this.connectToRoom}),s.a.createElement(\"div\",{className:\"usersOnlineStyle\"},s.a.createElement(\"p\",{style:{fontWeight:\"bold\"}},'\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0438 \\u0432 \\u043a\\u043e\\u043c\\u043d\\u0430\\u0442\\u0435 \"',this._ROOM_NAV_NAME,'\": '),a),s.a.createElement(m,{messages:this.state.messages}),s.a.createElement(g,{currentSocket:this.state.currentSocket,sendToServer:this.sendToServer}))}}]),t}(s.a.Component),y=a(88),N=a(90),x=a(89),j=a(87);o.a.render(s.a.createElement(y.a,null,s.a.createElement(N.a,null,s.a.createElement(x.a,{path:\"/\",component:M}),s.a.createElement(x.a,{path:\"/about\",component:v}),s.a.createElement(j.a,{to:\"/\"}))),document.getElementById(\"root\"))}},[[50,2,1]]]);","extractedComments":[]}